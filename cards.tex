\documentclass[a4paper]{article}
\usepackage[margin=10mm]{geometry}
\usepackage{tikz}
\usepackage{graphicx}
\usepackage{fontspec}
\usepackage{romanbar}

% Preview card dimensions (scaled to fit 3 per row on A4)
\newlength{\cardwidth}
\newlength{\cardheight}
\setlength{\cardwidth}{60mm}
\setlength{\cardheight}{102.86mm}  % 60 * 120/70 to keep tarot proportions

% Max width for card name (card width minus room for corner elements)
\newlength{\namewidth}
\setlength{\namewidth}{\cardwidth}
\addtolength{\namewidth}{-20mm}

% Fit text to max width: keeps height, squeezes width if needed
\newlength{\fitwidth}
\newcommand{\fittext}[2]{%  #1 = max width, #2 = content
  \settowidth{\fitwidth}{#2}%
  \ifdim\fitwidth>#1\relax
    \resizebox{#1}{\height}{#2}%
  \else
    #2%
  \fi
}

% Copperplate-like small caps font
\newfontface\cardfont{EB Garamond SC}[LetterSpace=8]

% Hebrew font
\newfontface\hebrewfont{DejaVu Sans}

% Playing card index font (bold serif like Bicycle cards)
\newfontface\indexfont{URW Bookman}


% Alchemical Mercury variant: U (crescent) directly above a cross, no circle
\newcommand{\alcmercury}{%
  \begin{scope}[shift={(0.5\cardwidth,0.52\cardheight)}, yellow!80!orange, line width=3.5mm]
    % Cross — vertical bar from bottom up to where U begins
    \draw (0,-24mm) -- (0,0mm);
    \draw (-12mm,-12mm) -- (12mm,-12mm); % horizontal bar
    % U (open arc) sitting on top of the cross
    \draw (-14mm,28mm) -- (-14mm,14mm) arc (180:360:14mm) -- (14mm,28mm);
  \end{scope}%
  \jokertext{black}
}

% Vertical JOKER on both sides, parameterized by color
\newcommand{\jokertext}[1]{%
  \foreach \letter/\i in {J/0,O/1,K/2,E/3,R/4} {
    \node[anchor=center, text=#1, font=\indexfont\bfseries\fontsize{12}{14}\selectfont]
      at (2.5mm, \cardheight-11mm-\i*5mm) {\letter};
  }
  \foreach \letter/\i in {J/0,O/1,K/2,E/3,R/4} {
    \node[anchor=center, rotate=180, text=#1, font=\indexfont\bfseries\fontsize{12}{14}\selectfont]
      at (\cardwidth-2.5mm, 11mm+\i*5mm) {\letter};
  }
}

% Card command: \tarotcard[overlay]{image file}{roman numeral}{card name}{hebrew letter}
\newcommand{\tarotcard}[5][]{%
  \begin{tikzpicture}
    % Card border
    \draw[rounded corners=2.5mm, thick] (0,0) rectangle (\cardwidth,\cardheight);
    \clip[rounded corners=2.5mm] (0,0) rectangle (\cardwidth,\cardheight);
    % Background image - shifted down to crop off Smith's lettering at bottom
    \node[anchor=south west, inner sep=0pt] at (0,-10mm) {%
      \includegraphics[width=\cardwidth]{#2}%
    };
    % Wash out the image
    \fill[white, opacity=0.88] (0,0) rectangle (\cardwidth,\cardheight);
    % Center overlay (if any)
    #1
    % Roman numeral — top left, with vinculum (overline/underline)
    \node[anchor=north west, text=black, font=\cardfont\fontsize{18}{20}\selectfont,
      inner sep=2.5mm]
      at (0,\cardheight+0.7mm) {#3};
    % Hebrew letter — top right
    \node[anchor=north east, text=black, font=\hebrewfont\fontsize{18}{20}\selectfont,
      inner sep=2.5mm]
      at (\cardwidth,\cardheight+0.3mm) {#5};
    % Card name — centered at top, horizontally squeezed if too wide
    \node[anchor=north, text=black, inner sep=0pt]
      at (0.5\cardwidth, \cardheight-2mm)
      {\fittext{\namewidth}{\cardfont\fontsize{16}{18}\selectfont #4}};
  \end{tikzpicture}%
}

\begin{document}
\pagestyle{empty}
\centering

% Row helper: 4 cards per row
\noindent
\tarotcard[\alcmercury]{images/a-00}{\O}{The Fool}{א}\hfill
\tarotcard[\jokertext{red}]{images/a-01}{\Romanbar{I}}{The Magician}{ב}\hfill
\tarotcard{images/a-02}{\Romanbar{II}}{The High Priestess}{ג}

\vspace{4mm}
\noindent
\tarotcard{images/a-03}{\Romanbar{III}}{The Empress}{ד}\hfill
\tarotcard{images/a-04}{\Romanbar{IV}}{The Emperor}{ה}\hfill
\tarotcard{images/a-05}{\Romanbar{V}}{The Hierophant}{ו}

\vspace{4mm}
\noindent
\tarotcard{images/a-06}{\Romanbar{VI}}{The Lovers}{ז}\hfill
\tarotcard{images/a-07}{\Romanbar{VII}}{The Chariot}{ח}\hfill
\tarotcard{images/a-08}{\Romanbar{VIII}}{Strength}{ט}

\vspace{4mm}
\noindent
\tarotcard{images/a-09}{\Romanbar{IX}}{The Hermit}{י}\hfill
\tarotcard{images/a-10}{\Romanbar{X}}{Wheel of Fortune}{כ}\hfill
\tarotcard{images/a-11}{\Romanbar{XI}}{Justice}{ל}

\newpage
\noindent
\tarotcard{images/a-12}{\Romanbar{XII}}{The Hanged Man}{מ}\hfill
\tarotcard{images/a-13}{\Romanbar{XIII}}{Death}{נ}\hfill
\tarotcard{images/a-14}{\Romanbar{XIV}}{Temperance}{ס}

\vspace{4mm}
\noindent
\tarotcard{images/a-15}{\Romanbar{XV}}{The Devil}{ע}\hfill
\tarotcard{images/a-16}{\Romanbar{XVI}}{The Tower}{פ}\hfill
\tarotcard{images/a-17}{\Romanbar{XVII}}{The Star}{צ}

\vspace{4mm}
\noindent
\tarotcard{images/a-18}{\Romanbar{XVIII}}{The Moon}{ק}\hfill
\tarotcard{images/a-19}{\Romanbar{XIX}}{The Sun}{ר}\hfill
\tarotcard{images/a-20}{\Romanbar{XX}}{Judgement}{ש}

\vspace{4mm}
\noindent
\tarotcard{images/a-21}{\Romanbar{XXI}}{The World}{ת}

\end{document}

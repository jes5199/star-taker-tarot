\documentclass[a4paper]{article}
\usepackage[margin=10mm]{geometry}
\usepackage{tikz}
\usetikzlibrary{decorations.text}
\usepackage{graphicx}
\usepackage{fontspec}
\usepackage{romanbar}

% Preview card dimensions (scaled to fit 3 per row on A4)
\newlength{\cardwidth}
\newlength{\cardheight}
\setlength{\cardwidth}{60mm}
\setlength{\cardheight}{102.86mm}  % 60 * 120/70 to keep tarot proportions

% Max width for card name (card width minus room for corner elements)
\newlength{\namewidth}
\setlength{\namewidth}{\cardwidth}
\addtolength{\namewidth}{-20mm}

% Fit text to max width: keeps height, squeezes width if needed
\newlength{\fitwidth}
\newcommand{\fittext}[2]{%  #1 = max width, #2 = content
  \settowidth{\fitwidth}{#2}%
  \ifdim\fitwidth>#1\relax
    \resizebox{#1}{\height}{#2}%
  \else
    #2%
  \fi
}

% Copperplate-like small caps font
\newfontface\cardfont{EB Garamond SC}[LetterSpace=8]

% Hebrew font
\newfontface\hebrewfont{Noto Serif Hebrew}

% CJK font
\newfontface\cjkfont{AR PL KaitiM Big5}

% Devanagari font
\newfontface\devfont{Noto Serif Devanagari}

% Playing card index font (bold serif like Bicycle cards)
\newfontface\indexfont{URW Bookman}


% Alchemical Salt: circle with horizontal line through middle
\newcommand{\alcsalt}{%
  \begin{scope}[shift={(0.5\cardwidth,0.52\cardheight)}, cyan, line width=3.5mm]
    \draw (0,0) circle (14mm);
    \draw (-14mm,0) -- (14mm,0);
  \end{scope}%
  % Kan trigram (Water) — left side: broken, solid, broken (bottom line blue)
  \begin{scope}[shift={(0.5\cardwidth-23mm,0.52\cardheight)}, line width=2mm, line cap=butt]
    % Top line — broken
    \draw (-4mm,5mm) -- (-1mm,5mm);
    \draw (1mm,5mm) -- (4mm,5mm);
    % Middle line — solid
    \draw (-4mm,0mm) -- (4mm,0mm);
    % Bottom line — broken, blue
    \draw[blue] (-4mm,-5mm) -- (-1mm,-5mm);
    \draw[blue] (1mm,-5mm) -- (4mm,-5mm);
    % Labels
    \node[above, font=\cardfont\fontsize{14}{16}\selectfont] at (0,6mm) {Kan};
    \node[below, font=\cardfont\fontsize{10}{12}\selectfont] at (0,-6mm) {Water};
  \end{scope}%
  % Kun trigram (Earth) — right side: all broken (bottom line green)
  \begin{scope}[shift={(0.5\cardwidth+23mm,0.52\cardheight)}, line width=2mm, line cap=butt]
    % Top line — broken
    \draw (-4mm,5mm) -- (-1mm,5mm);
    \draw (1mm,5mm) -- (4mm,5mm);
    % Middle line — broken
    \draw (-4mm,0mm) -- (-1mm,0mm);
    \draw (1mm,0mm) -- (4mm,0mm);
    % Bottom line — broken, green
    \draw[green!50!black] (-4mm,-5mm) -- (-1mm,-5mm);
    \draw[green!50!black] (1mm,-5mm) -- (4mm,-5mm);
    % Labels
    \node[above, font=\cardfont\fontsize{14}{16}\selectfont] at (0,6mm) {Kun};
    \node[below, font=\cardfont\fontsize{10}{12}\selectfont] at (0,-6mm) {Earth};
  \end{scope}%
}

% Alchemical Mercury variant: U (crescent) directly above a cross, no circle
\newcommand{\alcmercury}{%
  \begin{scope}[shift={(0.5\cardwidth,0.52\cardheight)}, yellow!80!orange, line width=3.5mm]
    % Cross — vertical bar from bottom up to where U begins
    \draw (0,-24mm) -- (0,0mm);
    \draw (-12mm,-12mm) -- (12mm,-12mm); % horizontal bar
    % U (open arc) sitting on top of the cross
    \draw (-14mm,28mm) -- (-14mm,14mm) arc (180:360:14mm) -- (14mm,28mm);
  \end{scope}%
  % QUICKSILVER label below Mercury symbol
  \node[anchor=north, text=black, font=\cardfont\fontsize{17}{19}\selectfont]
    at (0.5\cardwidth, 0.52\cardheight-24mm) {Quicksilver};
  \node[anchor=north, text=black, font=\cardfont\fontsize{9}{11}\selectfont]
    at (0.5\cardwidth, 0.52\cardheight-31mm) {m\enspace u\enspace t\enspace a\enspace b\enspace l\enspace e};
  \node[anchor=north, text=black, font=\cardfont\fontsize{17}{19}\selectfont]
    at (0.5\cardwidth, 0.52\cardheight-34mm) {Breath};
  \node[anchor=base, text=black, font=\hebrewfont\fontsize{14}{16}\selectfont]
    at (0.5\cardwidth-21mm, 0.52\cardheight-39mm) {רוח};
  \node[anchor=base, text=black, font=\cardfont\fontsize{10}{12}\selectfont]
    at (0.5\cardwidth-21mm, 0.52\cardheight-43mm) {ruach};
  \node[anchor=base, text=black, font=\cardfont\fontsize{10}{12}\selectfont]
    at (0.5\cardwidth, 0.52\cardheight-43mm) {vāta};
  \node[anchor=north, text=black, font=\devfont\fontsize{14}{16}\selectfont]
    at (0.5\cardwidth, 0.52\cardheight-44mm) {वात};
  \node[anchor=base east, text=black, font=\cardfont\fontsize{10}{12}\selectfont]
    at (0.5\cardwidth-1mm, 0.52\cardheight-52mm) {air};
  \node[anchor=base, text=black, font=\cardfont\fontsize{10}{12}\selectfont]
    at (0.5\cardwidth, 0.52\cardheight-52mm) {\&};
  \node[anchor=base west, text=black, font=\cardfont\fontsize{10}{12}\selectfont]
    at (0.5\cardwidth+1mm, 0.52\cardheight-52mm) {void};
  \node[anchor=base, text=black, font=\cjkfont\fontsize{18}{20}\selectfont]
    at (0.5\cardwidth+21mm, 0.52\cardheight-39mm) {氣};
  \node[anchor=base, text=black, font=\cardfont\fontsize{10}{12}\selectfont]
    at (0.5\cardwidth+21mm, 0.52\cardheight-43mm) {qi};
  % Kan trigram (Water) — left side: broken, solid (blue), broken
  \begin{scope}[shift={(0.5\cardwidth-23mm,0.52\cardheight)}, line width=2mm, line cap=butt]
    % Top line — broken
    \draw (-4mm,5mm) -- (-1mm,5mm);
    \draw (1mm,5mm) -- (4mm,5mm);
    % Middle line — solid, blue
    \draw[blue] (-4mm,0mm) -- (4mm,0mm);
    % Bottom line — broken
    \draw (-4mm,-5mm) -- (-1mm,-5mm);
    \draw (1mm,-5mm) -- (4mm,-5mm);
    % Labels
    \node[above, font=\cardfont\fontsize{14}{16}\selectfont] at (0,6mm) {Kan};
    \node[below, font=\cardfont\fontsize{10}{12}\selectfont] at (0,-6mm) {Water};
  \end{scope}%
  % Li trigram (Fire) — right side: solid, broken (red), solid
  \begin{scope}[shift={(0.5\cardwidth+23mm,0.52\cardheight)}, line width=2mm, line cap=butt]
    % Top line — solid
    \draw (-4mm,5mm) -- (4mm,5mm);
    % Middle line — broken, red
    \draw[red] (-4mm,0mm) -- (-1mm,0mm);
    \draw[red] (1mm,0mm) -- (4mm,0mm);
    % Bottom line — solid
    \draw (-4mm,-5mm) -- (4mm,-5mm);
    % Labels
    \node[above, font=\cardfont\fontsize{14}{16}\selectfont] at (0,6mm) {Li};
    \node[below, font=\cardfont\fontsize{10}{12}\selectfont] at (0,-6mm) {Fire};
  \end{scope}%
  % Lot of Eros — heart in circle with curved text, bottom left
  \begin{scope}[shift={(7mm,4mm)}]
    \draw[thick] (0,0) circle (2.5mm);
    % Heart
    \draw[thick] (0,0.7mm)
      .. controls (-0.8mm,2.1mm) and (-2mm,1.3mm) .. (-2mm,0.5mm)
      .. controls (-2mm,-0.3mm) and (0,-1.5mm) .. (0,-1.8mm)
      .. controls (0,-1.5mm) and (2mm,-0.3mm) .. (2mm,0.5mm)
      .. controls (2mm,1.3mm) and (0.8mm,2.1mm) .. (0,0.7mm);
    % "Lot of" curved above
    \path[postaction={decorate, decoration={text along path,
      text={|\cardfont\fontsize{5}{6}\selectfont|Lot of Eros},
      text align=center, raise=0pt}}]
      (170:3.5mm) arc (170:10:3.5mm);
  \end{scope}%
  % 發 (hatsu/green dragon) — bottom right
  \begin{scope}[shift={(\cardwidth-7mm,5mm)}]
    \node[anchor=center, text=green!50!black, font=\cjkfont\fontsize{18}{20}\selectfont]
      at (0,0) {發};
    % "fa cái" curved above
    \path[postaction={decorate, decoration={text along path,
      text={|\cardfont\fontsize{5}{6}\selectfont\color{green!50!black}|fā cái},
      text align=center, raise=0pt}}]
      (170:3mm) arc (170:10:3mm);
    % "strike it rich" curved below
    \path[postaction={decorate, decoration={text along path,
      text={|\cardfont\fontsize{5}{6}\selectfont\color{green!50!black}|strike  it  rich},
      text align=center, raise=1pt, reverse path}}]
      (-10:4.5mm) arc (-10:-170:4.5mm);
  \end{scope}%
  \jokertext{black}
}

% Vertical JOKER on both sides, parameterized by color
\newcommand{\jokertext}[1]{%
  \foreach \letter/\i in {J/0,O/1,K/2,E/3,R/4} {
    \node[anchor=center, text=#1, font=\indexfont\bfseries\fontsize{12}{14}\selectfont]
      at (2.5mm, \cardheight-11mm-\i*5mm) {\letter};
  }
  \foreach \letter/\i in {J/0,O/1,K/2,E/3,R/4} {
    \node[anchor=center, rotate=180, text=#1, font=\indexfont\bfseries\fontsize{12}{14}\selectfont]
      at (\cardwidth-2.5mm, 11mm+\i*5mm) {\letter};
  }
}

% Card command: \tarotcard[overlay]{image file}{roman numeral}{card name}{hebrew letter}
\newcommand{\tarotcard}[5][]{%
  \begin{tikzpicture}
    % Card border
    \draw[rounded corners=2.5mm, thick] (0,0) rectangle (\cardwidth,\cardheight);
    \clip[rounded corners=2.5mm] (0,0) rectangle (\cardwidth,\cardheight);
    % Background image - shifted down to crop off Smith's lettering at bottom
    \node[anchor=south west, inner sep=0pt] at (0,-10mm) {%
      \includegraphics[width=\cardwidth]{#2}%
    };
    % Wash out the image
    \fill[white, opacity=0.88] (0,0) rectangle (\cardwidth,\cardheight);
    % Center overlay (if any)
    #1
    % Roman numeral — top left, with vinculum (overline/underline)
    \node[anchor=north west, text=black, font=\cardfont\fontsize{18}{20}\selectfont,
      inner sep=2.5mm]
      at (0,\cardheight+0.7mm) {#3};
    % Hebrew letter — top right
    \node[anchor=north east, text=black, font=\hebrewfont\fontsize{18}{20}\selectfont,
      inner sep=2.5mm]
      at (\cardwidth,\cardheight+1mm) {#5};
    % Card name — centered at top, horizontally squeezed if too wide
    \node[anchor=north, text=black, inner sep=0pt]
      at (0.5\cardwidth, \cardheight-2mm)
      {\fittext{\namewidth}{\cardfont\fontsize{16}{18}\selectfont #4}};
  \end{tikzpicture}%
}

\begin{document}
\pagestyle{empty}
\centering

% Row helper: 4 cards per row
\noindent
\tarotcard[\alcmercury]{images/a-00}{\O}{The Fool}{א}\hfill
\tarotcard[\jokertext{red}]{images/a-01}{\Romanbar{I}}{The Magician}{ב}\hfill
\tarotcard{images/a-02}{\Romanbar{II}}{The High Priestess}{ג}

\vspace{4mm}
\noindent
\tarotcard{images/a-03}{\Romanbar{III}}{The Empress}{ד}\hfill
\tarotcard{images/a-04}{\Romanbar{IV}}{The Emperor}{ה}\hfill
\tarotcard{images/a-05}{\Romanbar{V}}{The Hierophant}{ו}

\vspace{4mm}
\noindent
\tarotcard{images/a-06}{\Romanbar{VI}}{The Lovers}{ז}\hfill
\tarotcard{images/a-07}{\Romanbar{VII}}{The Chariot}{ח}\hfill
\tarotcard{images/a-08}{\Romanbar{VIII}}{Strength}{ט}

\vspace{4mm}
\noindent
\tarotcard{images/a-09}{\Romanbar{IX}}{The Hermit}{י}\hfill
\tarotcard{images/a-10}{\Romanbar{X}}{Wheel of Fortune}{כ}\hfill
\tarotcard{images/a-11}{\Romanbar{XI}}{Justice}{ל}

\newpage
\noindent
\tarotcard[\alcsalt]{images/a-12}{\Romanbar{XII}}{The Hanged Man}{מ}\hfill
\tarotcard{images/a-13}{\Romanbar{XIII}}{Death}{נ}\hfill
\tarotcard{images/a-14}{\Romanbar{XIV}}{Temperance}{ס}

\vspace{4mm}
\noindent
\tarotcard{images/a-15}{\Romanbar{XV}}{The Devil}{ע}\hfill
\tarotcard{images/a-16}{\Romanbar{XVI}}{The Tower}{פ}\hfill
\tarotcard{images/a-17}{\Romanbar{XVII}}{The Star}{צ}

\vspace{4mm}
\noindent
\tarotcard{images/a-18}{\Romanbar{XVIII}}{The Moon}{ק}\hfill
\tarotcard{images/a-19}{\Romanbar{XIX}}{The Sun}{ר}\hfill
\tarotcard{images/a-20}{\Romanbar{XX}}{Judgement}{ש}

\vspace{4mm}
\noindent
\tarotcard{images/a-21}{\Romanbar{XXI}}{The World}{ת}

\end{document}
